<html>
    <head>
        <script>
            var socket = new WebSocket('ws://localhost:3049');
            socket.onopen = function(event) {
              console.log(event);
              sendText();
            }

            socket.onmessage = function (event) {
              console.log(event);
              document.getElementById("messages").innerHTML = event;
            }

            function sendText() {
              // Construct a msg object containing the data the server needs to process the message from the chat client.
              var msg = {
                topic: "subscribe",
                options: {
                  deviceID: 'f76302c6-fa4a-4209-b5ad-72450d003435',
                  serviceID: 'urn:cdif-net:serviceID:BinarySwitch'
                },
                date: Date.now()
              };

              // Send the msg object as a JSON-formatted string.
              socket.send(JSON.stringify(msg));
              socket.send(JSON.stringify(msg));
              //socket.send(JSON.stringify(msg));

              // var msg = "ssss";
              // socket.send(msg);


              // Blank the text input element, ready to receive the next line of text from the user.
              document.getElementById("messages").value = "";

            }

/*            var room1 = {
              "deviceID": '1fb2401b-f5ba-480e-a15a-fe9887f50705',
              "serviceID": 'urn:openzwave-com:serviceID:basic',
              "onUpdate": false
            };
*/
/*            var room2 = {
              "deviceID": 'b142da3b-73a9-4737-96e5-44693d8d4df4',
              "serviceID": 'urn:openzwave-com:serviceID:sensor_binary',
              "onUpdate": true
            };
*/
/*            var room3 = {
              "deviceID": '358281ab-a83d-4002-b8a9-391ca8e60be1',
              "serviceID": 'urn:cdif-net:serviceID:Illuminance',
              "onUpdate": true
            };
*/
/*            var room3 = {
              "deviceID": 'b7ecdfd2-0d29-4092-b4e6-dec6c65a46d6',
              "serviceID": 'urn:bluetooth-org:serviceID:Heart Rate',
              "onUpdate": true
            };
*/
/*
            var room4 = {
              "deviceID": '358281ab-a83d-4002-b8a9-391ca8e60be1',
              "serviceID": 'urn:cdif-net:serviceID:Accelerometer',
              "onUpdate": true
            };
*/
            // var room5 = {
            //   "deviceID": 'd5a7db92-8925-4a44-9f50-91b7dbe30d76',
            //   "serviceID": 'urn:cdif-net:serviceID:BinarySwitch',
            //   "onUpdate": true,
            //   "duration": 50000
            // };


 //            sock.on('connect', function() {
 //                console.log('client connected to server');
 // //               sock.emit('subscribe', JSON.stringify(room1));
 // //               sock.emit('subscribe', JSON.stringify(room2));
 // //               sock.emit('subscribe', JSON.stringify(room3));
 // //               sock.emit('subscribe', JSON.stringify(room2));
 //                sock.emit('subscribe', JSON.stringify(room5));
 //            });
 //            sock.on('event', function(data) {
 //                console.log('received ' + JSON.stringify(data));
 //            });
 //            sock.on('error', function(data) {
 //                console.log('error: ' + data);
 //            });

        </script>
    </head>
    <body>
        <ul id='messages'></ul>
    </body>
</html>
